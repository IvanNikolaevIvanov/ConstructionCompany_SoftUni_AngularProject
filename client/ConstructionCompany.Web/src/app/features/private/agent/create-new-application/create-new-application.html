<div class="content mt-10 p-4">
  <div class="container-fluid">
    <form
      class="row g-3 flex-wrap"
      [formGroup]="applicationForm"
      (ngSubmit)="onSave()"
    >
      <h2>Create A New Application</h2>
      <!-- Left column: Form fields -->
      <div class="col-md-8">
        <!-- Row with 2 half-width fields -->
        <div class="row mb-3">
          <!-- Title -->
          <div class="col-md-6">
            <label for="title" class="form-label">Title:</label>
            <input
              class="form-control"
              [class.input-error]="isTitleValid"
              type="text"
              id="title"
              formControlName="title"
              class="form-control"
            />
            @if (isTitleValid) {
              <p class="error">
                {{ titleErrorMessage }}
              </p>
            }
          </div>
          <!-- Client's Name -->
          <div class="col-md-6">
            <label for="clientName" class="form-label">Client Name:</label>
            <input
              class="form-control"
              [class.input-error]="isClientNameValid"
              type="text"
              id="clientName"
              formControlName="clientName"
              class="form-control"
            />
            @if (isClientNameValid) {
              <p class="error">
                {{ clientNameErrorMessage }}
              </p>
            }
          </div>
        </div>
        <!-- Row with 2 half-width fields -->
        <div class="row mb-3">
          <!-- Price -->
          <div class="col-md-3">
            <label for="price" class="form-label">Price:</label>
            <input
              id="price"
              type="text"
              formControlName="price"
              class="form-control"
              mask="separator.2"
              thousandSeparator="."
              decimalMarker=","
            />
            @if (isPriceValid) {
              <p class="error">
                {{ priceErrorMessage }}
              </p>
            }
          </div>
          <!-- Price In Words -->
          <div class="col-md-9">
            <label for="priceInWords" class="form-label">Price In Words:</label>
            <input
              class="form-control"
              type="text"
              id="priceInWords"
              [value]="this.numericPrice | priceIntoWords"
              readonly
            />
          </div>
        </div>
        <!-- Row with 2 half-width fields -->
        <div class="row mb-3">
          <!-- Client's Bank -->
          <div class="col-md-6">
            <label for="clientBank" class="form-label">Client's Bank:</label>
            <select
              id="clientBank"
              class="form-select"
              formControlName="clientBank"
              [class.input-error]="isClientBankValid"
            >
              <option value="" disabled>Select a bank</option>
              <option *ngFor="let bank of banks" [value]="bank">
                {{ bank }}
              </option>
            </select>

            @if (isClientBankValid) {
              <p class="error">
                {{ clientBankErrorMessage }}
              </p>
            }
          </div>
          <!-- Client's IBAN -->
          <div class="col-md-6">
            <label for="clientBankIban" class="form-label"
              >Client's IBAN:</label
            >
            <input
              class="form-control"
              [class.input-error]="isClientIBANValid"
              type="text"
              id="clientBankIban"
              formControlName="clientBankIban"
              class="form-control"
            />
            @if (isClientIBANValid) {
              <p class="error">
                {{ clientIBANErrorMessage }}
              </p>
            }
          </div>
        </div>
        <!-- Full-width field -->
        <!-- Description -->
        <div class="mb-3">
          <label for="description" class="form-label">Description:</label>
          <textarea
            id="description"
            class="form-control"
            rows="3"
            formControlName="description"
          ></textarea>
          @if (isDescriptionValid) {
            <p class="error">
              {{ descriptionErrorMessage }}
            </p>
          }
        </div>
        <!-- CheckBoxes -->
        <div class="checkbox-container">
          <div class="row mt-3">
            <!-- Uses Concrete -->
            <div class="col-md-4 form-check mt-2">
              <input
                type="checkbox"
                class="form-check-input large-checkbox"
                id="usesConcrete"
                formControlName="usesConcrete"
              />
              <label class="form-check-label" for="usesConcrete">
                Uses Concrete
              </label>
            </div>

            <!-- Uses Bricks -->
            <div class="col-md-4 form-check mt-2">
              <input
                type="checkbox"
                class="form-check-input large-checkbox"
                id="usesBricks"
                formControlName="usesBricks"
              />
              <label class="form-check-label" for="usesBricks">
                Uses Bricks
              </label>
            </div>

            <!-- Uses Steel -->
            <div class="col-md-4 form-check mt-2">
              <input
                type="checkbox"
                class="form-check-input large-checkbox"
                id="usesSteel"
                formControlName="usesSteel"
              />
              <label class="form-check-label" for="usesSteel">
                Uses Steel
              </label>
            </div>

            <!-- Uses Insulation -->
            <div class="col-md-4 form-check mt-15">
              <input
                type="checkbox"
                class="form-check-input large-checkbox"
                id="usesInsulation"
                formControlName="usesInsulation"
              />
              <label class="form-check-label" for="usesInsulation">
                Uses Insulation
              </label>
            </div>

            <!-- Uses Wood -->
            <div class="col-md-4 form-check mt-15">
              <input
                type="checkbox"
                class="form-check-input large-checkbox"
                id="usesWood"
                formControlName="usesWood"
              />
              <label class="form-check-label" for="usesWood"> Uses Wood </label>
            </div>

            <!-- Uses Glass -->
            <div class="col-md-4 form-check mt-15">
              <input
                type="checkbox"
                class="form-check-input large-checkbox"
                id="usesGlass"
                formControlName="usesGlass"
              />
              <label class="form-check-label" for="usesGlass">
                Uses Glass
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-4 mt-0" id="upload-section">
        <h5>Upload Files</h5>
        <file-upload
          [files]="files"
          (filesChange)="onFilesChanged($event)"
        ></file-upload>
      </div>
      <div class="d-flex justify-content-end px-10" id="button-container">
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="applicationForm.invalid"
        >
          Save Application
        </button>
      </div>
    </form>
  </div>
</div>
